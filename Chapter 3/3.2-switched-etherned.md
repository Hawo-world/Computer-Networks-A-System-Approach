# üß≠ 3.2 Switched Ethernet

## üåê Summary: Switched Ethernet

### Overview

**Switched Ethernet** (Layer 2 switching) is the modern evolution of Ethernet networks.  
Historically called **bridges**, these devices interconnect multiple Ethernet segments to form an **extended LAN**.  
Modern implementations use **point-to-point links** and **L2 switches**, but the underlying principles remain the same:  
they forward Ethernet frames intelligently to create scalable, loop-free, and logically organized networks.

---

### 3.2.1 Learning Bridges

- **Goal:** Improve efficiency by avoiding unnecessary frame forwarding.  
- **How it works:**  
  - The bridge inspects **source addresses** of incoming frames to learn which hosts are reachable through which ports.  
  - It builds a **forwarding table (MAC address table)** mapping host addresses to ports.  
  - Unknown destination frames are **flooded** out all ports except the one they arrived on.  
  - Entries **time out** to handle host mobility.  
- **Result:**  
  - Reduces unnecessary traffic.  
  - Operates **connectionlessly**, similar to datagram forwarding.

---

### 3.2.2 Implementation

- A **bridge table** holds entries of (MAC address, port, TTL).  
- `updateTable()` adds or refreshes entries as packets arrive.  
- When full, old entries may be replaced (e.g., least TTL).  
- Correctness is maintained even with incomplete tables‚Äîjust with lower efficiency.  
- Bridges require no global topology knowledge, improving robustness.

---

### 3.2.3 Spanning Tree Algorithm (STA)

- **Problem:** Loops in the network cause infinite frame circulation.  
- **Solution:** The **Spanning Tree Protocol (STP)**, invented by **Radia Perlman**, ensures a **loop-free topology**.  

#### How It Works

1. Each switch has a unique ID.  
2. The switch with the **lowest ID** becomes the **root**.  
3. Each switch computes its **shortest path to the root**.  
4. Each segment has a **designated switch** (closest to root) that forwards traffic.  
5. Switches exchange **configuration messages** (Root ID, Distance, Sender ID).  
6. The system stabilizes when all switches agree on a single spanning tree.  

- **Dynamic Recovery:** STP automatically reconfigures when switches or links fail.  
- **Trade-off:** Loops are prevented but packets may travel longer routes (up and down the tree).

---

### 3.2.4 Broadcast and Multicast

- **Broadcast:** Frames sent to all hosts are forwarded on all **active ports** (except the input).  
- **Multicast:** Similar to broadcast, but ideally delivered only to interested hosts.  
  - Extensions exist for pruning unnecessary links.  
  - In practice, **multicast ‚âà broadcast** in most Ethernet switches.

---

### 3.2.5 Virtual LANs (VLANs)

- **Problem:** Large Layer 2 networks don‚Äôt scale well due to:  
  - STP‚Äôs linear growth with the number of switches.  
  - Network-wide broadcast flooding.  

#### Solution: VLANs

VLANs logically divide one physical LAN into multiple virtual networks.

- Each port is assigned a **VLAN ID (VID)**.  
- Frames are tagged with a **VLAN header (802.1Q)** containing a **12-bit VID**.  
- Switches forward frames **only within the same VLAN**.  
- VLANs simplify reconfiguration without physical rewiring.

#### Example

- VLAN 100: Hosts W, X  
- VLAN 200: Hosts Y, Z  
- Broadcasts from X reach W but not Y or Z.

#### Benefits

- Better scalability and isolation.  
- Easier network management and logical grouping of users.

#### Limitation

- VLANs operate only across **homogeneous networks** (e.g., Ethernet + Wi-Fi, but not Ethernet + ATM).

---

## üìò Key Takeaways

- **L2 switches** replaced shared Ethernet with point-to-point, full-duplex links.  
- **Learning bridges** automate forwarding decisions.  
- **Spanning Tree Protocol** ensures loop-free topologies.  
- **Broadcast and multicast** enable group communication but limit scalability.  
- **VLANs** introduce logical segmentation for better performance and management.  
- L2 networks still lack hierarchy and cross-technology interoperability.

---

## üßæ Glossary

| Term | Definition |
|------|-------------|
| **Bridge** | Connects multiple LAN segments and forwards Ethernet frames. |
| **Switch (L2 Switch)** | Modern bridge connecting point-to-point Ethernet links. |
| **Forwarding Table / MAC Table** | Maps MAC addresses to switch ports. |
| **Flooding** | Sending a frame out all ports when the destination is unknown. |
| **TTL (Time to Live)** | Expiration timer for forwarding table entries. |
| **Loop** | A network cycle causing endless frame forwarding. |
| **Spanning Tree Protocol (STP)** | Algorithm ensuring a loop-free logical topology. |
| **Root Bridge** | The switch elected as the reference point in STP. |
| **Designated Switch** | Switch responsible for forwarding traffic toward the root. |
| **Configuration Message** | STP control frame with (Root ID, Distance, Sender ID). |
| **Broadcast Frame** | Frame sent to all devices on the LAN. |
| **Multicast Frame** | Frame sent to a specific group of devices. |
| **Virtual LAN (VLAN)** | Logical segmentation of a physical LAN. |
| **VLAN ID (VID)** | 12-bit field identifying a VLAN (in 802.1Q tag). |
| **802.1Q Tag** | VLAN header with VID and priority bits. |
| **Extended LAN** | LAN formed by interconnecting multiple segments via bridges/switches. |
