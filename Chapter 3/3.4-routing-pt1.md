
---

üåê Section 3.4: Routing (Part 1)

(Covers: Introduction ‚Üí 3.4.1 Graph Model ‚Üí 3.4.2 Distance-Vector / RIP)


---

3.4 Introduction: Routing vs. Forwarding

üîπ Core Concepts

Forwarding = local, per-packet operation.

Looks up destination in a forwarding table ‚Üí sends packet via correct interface.

This is the data plane ‚Äî fast, hardware-optimized.


Routing = global, distributed process that builds the forwarding table.

Uses routing algorithms to learn network topology.

This is the control plane ‚Äî logical, protocol-driven.



üîπ Tables and Their Roles

Table	Purpose	Contents

Routing Table	Built by routing algorithms	Network prefixes ‚Üí next hops
Forwarding Table	Used for actual packet delivery	Network prefix ‚Üí interface + MAC address


Routing table ‚Üí input to forwarding table.

Forwarding tables are often implemented in hardware (fast lookups), routing tables are not.


üîπ Scale and Scope

Protocols in this section are for intradomain routing ‚Äî inside one administrative domain (like an ISP or campus).

Called Interior Gateway Protocols (IGPs).

Internet-wide (interdomain) routing ‚Äî handled by BGP ‚Äî comes later.



---

3.4.1 Network as a Graph

üîπ Routing as a Graph Problem

The network can be modeled as a graph:

Nodes = routers (or hosts).

Edges = physical links with associated costs (weights).


The goal: find the lowest-cost path between any two nodes.


üîπ Why Dynamic Routing?

Static preloaded paths fail to scale because:

Topology can change (link/node failures).

New links or routers may appear.

Link costs may vary over time (load, bandwidth, etc.).


Hence, distributed, adaptive algorithms are needed ‚Äî these dynamically compute shortest paths.

üîπ Two Main Classes

1. Distance-Vector (DV) ‚Äî routers exchange info with neighbors only.


2. Link-State (LS) ‚Äî routers flood link information to all nodes.



Both aim to reach convergence ‚Äî where all routers agree on shortest paths.


---

3.4.2 Distance-Vector Routing (RIP)

üîπ Concept

Each router maintains a vector of distances (costs) to all destinations.

Routers periodically exchange their vectors with direct neighbors.

Based on the Bellman-Ford algorithm:

> Each node updates its route to destination X by checking
if neighbor + cost_to_neighbor + neighbor‚Äôs_cost_to_X is smaller.




üîπ Initialization

Each node knows:

Cost to directly connected neighbors.

Distance = ‚àû for unreachable nodes.


Example: If A is connected to B, C, E, F ‚Üí A‚Äôs table starts with cost 1 to each, ‚àû to others.


üîπ Iterative Updates

1. Routers exchange distance vectors.


2. Each node updates its table if it finds a shorter path via a neighbor.


3. This continues until all routers agree ‚Üí network convergence.




---

üîπ Routing Updates

Periodic updates: sent regularly (e.g., every 30 seconds in RIP).

Triggered updates: sent immediately upon topology change.

Link failures are detected by:

Missing periodic updates, or

Failed link tests (no ACKs, control packet loss).




---

üîπ Failure Example & ‚ÄúCount to Infinity‚Äù

When a link fails, routers may loop trying to update each other‚Äôs distance to a node, creating a count-to-infinity problem:

Routers increment distance endlessly, never realizing the node is unreachable.


Mitigation Techniques

Technique	Description	Limitation

Infinity limit	Use a small max hop count (e.g., 16 in RIP) to bound loops.	Limits network size.
Split Horizon	Don‚Äôt advertise routes learned from a neighbor back to that neighbor.	Solves 2-node loops only.
Split Horizon with Poison Reverse	Advertise route back but mark as infinite to prevent reuse.	Still limited.
Hold-down timers	Delay updates after failure to allow stabilization.	Slower convergence.



---

üîπ RIP Implementation Overview

A simple C-style pseudocode demonstrates how routes are merged and updated:

typedef struct {
    NodeAddr Destination;
    NodeAddr NextHop;
    int Cost;
    u_short TTL;
} Route;

Each route has a TTL (Time To Live) to expire unused entries.

The mergeRoute() function updates or replaces routes when new info arrives.

updateRoutingTable() processes all routes from neighbor updates.



---

üîπ Routing Information Protocol (RIP)

Overview

One of the earliest and simplest IP routing protocols.

Distributed with early BSD Unix, ensuring wide adoption.

Implements distance-vector routing with hop-count metric.


RIP Details

Property	Description

Metric	Hop count (1 per link).
Infinity value	16 (max 15 hops).
Updates	Every 30 seconds (periodic) + triggered.
Advertisement	List of (network, subnet mask, distance) entries.
Versions	RIPv1 (classful), RIPv2 (supports subnet masks, authentication).


Advantages

Simple, easy to implement.

Works well for small networks.


Limitations

Slow convergence.

Hop-count limit (small-scale only).

Vulnerable to count-to-infinity loops.



---

üåü Key Takeaways (Part 1)

1. Routing ‚â† Forwarding ‚Äî Routing builds the tables; forwarding uses them.


2. Graph-based model: networks as nodes + costed links.


3. Dynamic distributed protocols solve the shortest-path problem.


4. Distance-vector (RIP) uses neighbor exchanges and Bellman-Ford.


5. Count-to-infinity and convergence speed are DV‚Äôs main weaknesses.


6. RIP is simple but not scalable; used mainly in small domains.




---

üìò Glossary (Part 1)

Term	Definition

Routing	Building routing tables using distributed algorithms.
Forwarding	Using the forwarding table to send packets along chosen paths.
Data Plane	Handles real packet forwarding (hardware level).
Control Plane	Handles routing logic (software level).
Routing Table	Network prefixes ‚Üí next hops; used to build forwarding table.
Forwarding Table	Network prefix ‚Üí output interface + MAC address.
Intradomain Routing / IGP	Routing within a single administrative domain.
Convergence	State where all routers agree on shortest paths.
Distance Vector (DV)	Each router advertises distance vectors to neighbors.
Bellman-Ford Algorithm	Iterative method to compute shortest paths via neighbors.
Count to Infinity	Looping update problem in DV routing.
Split Horizon / Poison Reverse	Loop-prevention techniques in DV routing.
RIP (Routing Information Protocol)	DV protocol using hop count metric; max 15 hops.
Periodic Update	Regular routing table advertisement.
Triggered Update	Immediate update upon topology change.
TTL (in routing table)	Lifetime of a learned route entry before it expires.



---
