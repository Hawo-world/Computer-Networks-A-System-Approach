# 🌐 4.1 Global Internet

## Summary

### Overview

The Internet is not a random web of connections—it has structure shaped by organizations, providers, and independent administrative entities.  
As it grew from the NSFNET era into today’s commercial and global system, the challenge became scaling routing and addressing to support hundreds of thousands of networks and billions of devices.  
This section introduces **hierarchical routing**, **autonomous systems (AS)**, and **BGP**, the key mechanisms that make global scalability possible.

---

### 4.1.1 Routing Areas

Inside large networks (or *domains*), routing can be scaled through **hierarchy** using *areas*.  
Link-state protocols like **OSPF** divide a network into smaller, manageable **areas**, with one special *backbone area* (Area 0) that connects all others.

- **Intra-area routing:** Routers within an area exchange detailed link-state information.  
- **Inter-area routing:** *Area Border Routers (ABRs)* summarize routes between areas via the backbone.  
- **Virtual links:** Logically connect distant routers to the backbone when no direct connection exists.

This structure hides unnecessary details between areas, reducing routing overhead at the cost of optimality — packets between areas must travel through the backbone, even if shorter paths exist.

> **Key idea:** Hierarchy trades off optimal routing for scalability and manageability.

---

### 4.1.2 Interdomain Routing (BGP)

At a global level, the Internet is composed of **autonomous systems (ASes)** — networks under independent administration (ISPs, corporations, etc.).  
To scale routing across them, the problem is divided into:

- **Intradomain routing:** Within a single AS (using OSPF, IS-IS, etc.)  
- **Interdomain routing:** Between ASes (using **BGP**)

#### Challenges in Interdomain Routing

Each AS has its own *routing policies* driven by business or technical priorities.  
The protocol must support:

- Complex, independent routing policies  
- Arbitrary topologies (non-tree structures)  
- Trust and reachability without requiring cost metrics

#### BGP Basics

**Border Gateway Protocol (BGP)** is a **path-vector** protocol — each route advertisement includes the full list of ASes along the path.

- Prevents loops by rejecting routes containing the AS’s own number.  
- Runs over **TCP**, using **keepalive** and **withdrawn route** messages.  
- Uses **external BGP (eBGP)** between ASes and **internal BGP (iBGP)** within an AS.

#### AS Relationships and Policies

Three key business relationships influence routing:

1. **Provider–Customer:** Providers advertise all routes to customers; customers advertise their own (and their customers’) routes upward.  
2. **Customer–Provider:** Customers send traffic through providers but do not carry transit traffic between providers.  
3. **Peer–Peer:** Equal ISPs exchange only customer routes to avoid transit costs.

#### Integrating Interdomain and Intradomain Routing

- **Stub AS:** Uses a simple *default route* via its provider.  
- **Transit/Backbone AS:** Uses **iBGP** internally to distribute external routes.  
- Routers merge **iBGP-learned external routes** with **IGP** paths for forwarding decisions.

> **Key takeaway:** Hierarchical division—within areas and between ASes—reduces routing complexity from millions of nodes to thousands of manageable systems, enabling the Internet’s global scale.

---

## 📘 Glossary

| **Term** | **Definition** |
|-----------|----------------|
| **Autonomous System (AS)** | A network or group of networks under a single administrative control that shares a common routing policy. |
| **Routing Area** | Subdivision within a routing domain (like an OSPF area) that limits routing information spread. |
| **Backbone Area (Area 0)** | Central OSPF area connecting all others; all inter-area traffic must pass through it. |
| **Area Border Router (ABR)** | Router connecting non-backbone areas to the backbone area in OSPF. |
| **Virtual Link** | Logical connection allowing a router not directly in the backbone to act as if it were part of it. |
| **Intradomain Routing** | Routing within a single AS using interior gateway protocols (e.g., OSPF, IS-IS). |
| **Interdomain Routing** | Routing between ASes using BGP. |
| **BGP (Border Gateway Protocol)** | Main interdomain routing protocol exchanging reachability info using a path-vector model. |
| **Path Vector Protocol** | Routing method advertising full AS paths to prevent loops and enforce policy. |
| **Stub AS** | AS connected to only one other AS; carries only local traffic. |
| **Multihomed AS** | AS connected to multiple ASes but does not carry transit traffic. |
| **Transit AS** | AS connecting multiple others and carrying both local and transit traffic. |
| **Provider–Customer Relationship** | Business link where a provider offers Internet access to a customer network. |
| **Peer Relationship** | Equal ASes exchanging only customer traffic between themselves. |
| **eBGP (External BGP)** | BGP used between ASes. |
| **iBGP (Internal BGP)** | BGP used within an AS to share external routes internally. |
| **Default Route** | Routing entry for unspecified destinations, typically pointing to a border router. |
| **Reachability** | Knowledge of which networks are accessible through which ASes, without using cost metrics. |

---
