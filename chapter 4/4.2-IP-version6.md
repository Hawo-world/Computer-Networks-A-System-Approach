# üåç 4.2 IP Version 6

## Summary

### Overview

The development of **IPv6** was driven by one urgent problem ‚Äî **IPv4 address exhaustion**.  
While CIDR temporarily slowed address consumption, the explosive growth of Internet-connected devices demanded a vastly larger address space.  
IPv6 expanded addresses from 32 bits to **128 bits** and introduced a cleaner, more extensible protocol design to support scalability, efficiency, and modern Internet needs.

---

### 4.2.1 Historical Perspective

The **IETF** began work on a next-generation IP (originally called **IPng**) in the early 1990s.  
IPv6‚Äôs design addressed not just address exhaustion but also long-standing IPv4 limitations. Desired improvements included:

- Support for **real-time and QoS** applications  
- Built-in **security** features  
- **Autoconfiguration** for plug-and-play networking  
- Better **mobility and routing** support  

A key requirement was **backward compatibility** ‚Äî IPv6 had to coexist with IPv4 for decades during the transition.  
That transition, expected to take a few years, is still ongoing nearly 30 years later.

---

### 4.2.2 Addresses and Routing

The defining feature of IPv6 is its **128-bit address space**, capable of uniquely addressing about **3.4 √ó 10¬≥‚Å∏ devices** ‚Äî enough for every grain of sand on Earth to have an address.

#### Address Space Allocation

IPv6 eliminates rigid class-based addressing and uses **prefix-based allocation**, similar to CIDR. Major address types include:

| **Prefix / Type** | **Purpose** |
|--------------------|-------------|
| `00‚Ä¶0` | Unspecified address (used when none assigned) |
| `00‚Ä¶1` | Loopback (local testing) |
| `1111 1111` | Multicast addresses |
| `1111 1110 10` | Link-local unicast (for local subnet use) |
| *Everything else* | Global unicast (normal Internet addresses) |

**Global unicast addresses** act like IPv4 public addresses but support hierarchical aggregation for routing scalability.  
**Link-local** and **site-local** addresses support automatic local communication without global prefixes.

Transitional formats include:

- **IPv4-compatible** addresses (for dual-stack systems)  
- **IPv4-mapped** addresses (to represent IPv4-only nodes in IPv6)

#### Address Notation

IPv6 uses **colon-separated hexadecimal** notation (e.g., `47CD:1234:4422:AC02:0022:1234:A456:0124`).  
Zero compression (`::`) simplifies long zero sequences, and mixed notation (`::FFFF:128.96.33.81`) embeds IPv4 addresses.

#### Global Unicast and Hierarchy

IPv6 routing scalability depends on **address aggregation**:

- Providers receive large prefixes and delegate smaller ones to subscribers.  
- Aggregation reduces global routing table size.  
- Tradeoff: **renumbering** is required when changing providers.  
- Some proposals suggest **geographic addressing** for regional aggregation.

---

### 4.2.3 Packet Format

Despite being more powerful, the **IPv6 header** is simpler than IPv4‚Äôs ‚Äî only **40 bytes long** and free of obsolete fields.

**Key Fields:**

- **Version (6):** identifies IPv6 packets  
- **Traffic Class & Flow Label:** support QoS and flow control  
- **Payload Length:** data size (excluding header)  
- **Next Header:** replaces IPv4‚Äôs Protocol field; points to an **extension header** or transport layer  
- **Hop Limit:** replaces TTL  
- **Source & Destination Addresses:** 128-bit each  

#### Extension Headers

IPv6 moves optional data (fragmentation, authentication, routing, etc.) into separate **extension headers**, linked by the `Next Header` field.  
This improves:

- **Performance:** routers can skip irrelevant headers  
- **Flexibility:** headers can vary in length  

**Examples:**  
Fragmentation (value `44`), Authentication (`51`), TCP (`6`)

---

### 4.2.4 Advanced Capabilities

#### Autoconfiguration

IPv6 supports **stateless autoconfiguration** ‚Äî hosts self-generate addresses without DHCP servers.

1. The **interface ID** (last 64 bits) derives from the device‚Äôs MAC address.  
2. The **prefix** (first 64 bits) is advertised by routers.  

Result: plug-and-play networking ‚Äî devices configure themselves automatically when connected.

#### Source-Directed Routing & Anycast

IPv6‚Äôs **Routing Header** allows senders to specify intermediate nodes or networks (e.g., preferred providers).  
It also introduces **Anycast addressing**, where multiple devices share one address and packets go to the *nearest* node.

Common uses:

- Routing traffic to the nearest DNS or CDN server  
- Load balancing across identical nodes  

---

## üìò Glossary

| **Term** | **Definition** |
|-----------|----------------|
| **IPv6 (Internet Protocol Version 6)** | Latest version of IP, providing 128-bit addresses and modernized features for scalability. |
| **CIDR (Classless Interdomain Routing)** | Address allocation scheme using prefix aggregation to reduce routing table size. |
| **IPng (IP Next Generation)** | Early project name for IPv6. |
| **Autoconfiguration** | Ability for a device to configure network settings automatically without manual setup. |
| **Stateless Autoconfiguration** | IPv6 mechanism where a host builds its address from its MAC and a router prefix. |
| **Link-Local Address** | IPv6 address valid only on a local link. |
| **Global Unicast Address** | Standard public IPv6 address for global communication. |
| **Multicast Address** | Address for one-to-many communication (replaces IPv4 class D). |
| **Anycast Address** | Address shared by multiple nodes where packets are delivered to the nearest one. |
| **Next Header Field** | Field indicating the next protocol or extension header. |
| **Extension Header** | Optional IPv6 headers for fragmentation, authentication, etc. |
| **Flow Label** | Field marking packets in the same traffic flow for QoS. |
| **Provider-Based Addressing** | Model where ISPs allocate prefixes to customers, enabling aggregation. |
| **Renumbering** | Reassigning network addresses, often needed when switching ISPs. |
| **IPv4-Mapped IPv6 Address** | Format for representing IPv4-only devices in IPv6. |
| **Anycast Routing** | Routing technique sending packets to the nearest of multiple identical destinations. |

---
